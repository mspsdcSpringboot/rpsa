<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:insert="~{layout/headerFooterDynamicLayout.html}">
<main th:fragment = "content">
    <div class="container-fluid" id="main1">
        <div class="row main-content justify-content-center">
            <div class="col-md-6 mb-5 mb-md-0">
                <div class="shadow-lg p-4 wow login-form1">

                    <!-- CSRF Token -->
<!--                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />-->

                    <div class="form-group mb-3">
                        <h5 class="text-center"><strong>CHANGE PASSWORD</strong></h5>
                        <hr />
                    </div>

                    <!-- Hidden input for usercode -->
                    <input id="usercode" th:value="${userData.usercode}" type="hidden" />

                    <div class="form-group mb-3">
                        <!-- Hidden input for username -->
                        <input id="userid" name="username" type="hidden" placeholder="Username" autocomplete="off"
                               class="form-control input zoom1" th:value="${userData.username}" />
                    </div>

                    <!-- Current Password Input -->
                    <!-- Current Password Input -->
                    <div class="form-group mb-3">
                        <label for="currentpassword">Current Password</label>
                        <div class="input-group">
                            <input type="password" class="form-control input zoom1" placeholder="Current Password"
                                   id="currentpassword" name="currentpassword" autocomplete="off" required />
                            <span class="input-group-text" onclick="togglePasswordVisibility('currentpassword', this)">
                                <i class="fa fa-eye-slash" aria-hidden="true"></i>
                            </span>
                        </div>
                    </div>

                    <!-- New Password Input -->
                    <div class="form-group mb-3">
                        <label for="newpassword">New Password</label>
                        <div class="input-group">
                            <input type="password" class="form-control input zoom1" placeholder="New Password"
                                   id="newpassword" name="newpassword" autocomplete="off" required />
                            <span class="input-group-text" onclick="togglePasswordVisibility('newpassword', this)">
                                <i class="fa fa-eye-slash" aria-hidden="true"></i>
                            </span>
                        </div>
                    </div>

                    <!-- Confirm New Password Input -->
                    <div class="form-group mb-3">
                        <label for="confirmnewpassword">Confirm New Password</label>
                        <div class="input-group">
                            <input type="password" class="form-control input zoom1" placeholder="Confirm Password"
                                   id="confirmnewpassword" name="confirmnewpassword" autocomplete="off" required />
                            <span class="input-group-text" onclick="togglePasswordVisibility('confirmnewpassword', this)">
                                <i class="fa fa-eye-slash" aria-hidden="true"></i>
                            </span>
                        </div>
                    </div>

                    <!-- Submit Button and Hidden Random Key -->
                    <div class="container mt-2 text-center">
                        <input type="hidden" name="randomKey" id="randomKey" th:value="${randomKey}" />
                        <button id="savebtn" type="submit" class="btn btn-primary">SUBMIT</button>
                        <br /><br />
                        <a th:href="@{/changeprofile}">Change Profile</a>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Include Font Awesome CDN (if not already included) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha384-jLKHWMVB7lzNxZTHo9AAwDPDjnBja0OzBRfU9npFcsIBkGVPACQfjE9yGpJrBToN" crossorigin="anonymous">

    <script>
        function togglePasswordVisibility(inputId, iconElement) {
            const input = document.getElementById(inputId);
            const icon = iconElement.querySelector('i');

            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            }
        }
    </script>

    <script th:src="@{/web/js/jsfiles/changepassword.js}" type="text/javascript"></script>


</main>
</html>